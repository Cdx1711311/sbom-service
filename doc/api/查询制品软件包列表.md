<!--
project: "SBOM Service"
title: 查询制品软件包列表
date: 2022-09-24
maintainer: huanceng
comment: ""
-->

# 查询制品软件包列表

## API接口

POST /sbom-api/querySbomPackages

### 路径参数

`productName`: 查询的制品名    string      *必需*

### 查询参数

`packageName`: 查询的包名       string        *非必需*

`isExactly`: 是否精确查询   默认null    boolean        *非必需*

`vulSeverity`: 软件包最严重漏洞级别   默认null       string        *非必需*

`noLicense`: 是否无license   默认null    boolean        *非必需*

`multiLicense`: 是否多license   默认null    boolean        *非必需*

`isLegalLicense`: license是否合规   默认null    boolean        *非必需*

`licenseId`: license id     默认null       string        *非必需*

`page`: 分页页数   默认0    int        *非必需*

`size`: 单页数量   默认15    int      *非必需*


| severity可选值 | 说明       |
| -------------- | ---------- |
| NA             | 无漏洞     |
| UNKNOWN        | 未知漏洞   |
| NONE           | 无风险漏洞 |
| LOW            | 低危漏洞   |
| MEDIUM         | 中危漏洞   |
| HIGH           | 高危漏洞   |
| CRITICAL       | 致命漏洞   |

### HTTP状态码

```text
200: OK
500: Internal Server Error
```

### 返回字段说明

```text
content: 分页内容 list
  id: 软件包UUID string
  name: 软件包名 string
  version: 软件包版本 string
  licenseConcluded: 软件包license  string
  copyright: 软件包版权信息 string
  supplier: 软件包供应商 string
  statistics: 软件包统计信息 map<string, ?>
    criticalVulCount: 致命漏洞数量    long
    highVulCount: 高危漏洞数量    long
    mediumVulCount: 中危漏洞数量  long  
    lowVulCount: 低危漏洞数量 long
    noneVulCount: 无风险漏洞数量   long
    unknownVulCount: 未知漏洞数量 long

last: 当前页是否最后一页 boolean
totalElements: 总元素数量 long
totalPages: 总页数 int
size: 单页最大元素数量 int
number: 当前页数  int
first: 当前页是否第一页 boolean
numberOfElements: 当前页元素数量 int
empty: 当前页是否为空  boolean
```

### 样例

#### 请求-1

POST /sbom-api/querySbomPackages?productName=mindsporeTest

#### 返回-1

```json
{
    "content": [
        {
            "id": "c1131bf2-e31f-49f6-a0de-e481ea953cfe",
            "name": "abseil-cpp",
            "version": "20210324.2",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        },
        {
            "id": "b4ab6ee0-9e09-472d-82b9-d0625d166de6",
            "name": "abseil-cpp",
            "version": "20210324.2",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        },
        {
            "id": "6eb6aa72-b248-411c-ab92-08fd14f5d3e9",
            "name": "akg",
            "version": "1.7.0",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        },
        {
            "id": "88f5e01e-d391-46e6-893e-fbc8da818cb8",
            "name": "akg",
            "version": "1.7.0",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        },
        {
            "id": "38ce5b54-474e-4976-a931-e15c9f8196b2",
            "name": "asttokens",
            "version": "2.0.5",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 1,
                "mediumVulCount": 2,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 1
            }
        },
        {
            "id": "8c1e0bfd-b821-47b6-95ce-0051ce05b92a",
            "name": "asttokens",
            "version": "2.0.5",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        },
        {
            "id": "2f8b2ddd-95c1-4bad-975e-2dae5ed8e61d",
            "name": "asttokens",
            "version": "2.0.5",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        },
        {
            "id": "e22e75e1-b3a3-48c5-a6b5-c56e7f292527",
            "name": "astunparse",
            "version": "1.6.3",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        },
        {
            "id": "fe470874-e59a-4956-9ed7-3b24c04c7fc7",
            "name": "astunparse",
            "version": "1.6.3",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        },
        {
            "id": "bef76cf2-90bf-469c-984f-07f21a062186",
            "name": "astunparse",
            "version": "1.6.3",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        },
        {
            "id": "778d03ca-c457-4d16-baee-410ba8dca316",
            "name": "c-ares",
            "version": "1_15_0",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        },
        {
            "id": "7b0217d4-fd15-4c1c-a402-e519fb72a6c6",
            "name": "c-ares",
            "version": "1_15_0",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        },
        {
            "id": "d978bf37-3b1a-4c19-9839-e09b6bef3d34",
            "name": "cppjieba",
            "version": "5.0.3",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        },
        {
            "id": "a7cac538-b297-4c30-9aa6-7afff470ee2d",
            "name": "cppjieba",
            "version": "5.0.3",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        },
        {
            "id": "8977d351-a858-47bf-b73f-689aa02dafbc",
            "name": "eigen",
            "version": "3.3.9",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 0,
                "mediumVulCount": 0,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 0
            }
        }
    ],
    "last": false,
    "totalElements": 78,
    "totalPages": 6,
    "size": 15,
    "number": 0,
    "first": true,
    "numberOfElements": 15,
    "empty": false
}
```

#### 请求-2

POST /sbom-api/querySbomPackages?productName=mindsporeTest&page=0&size=5&packageName=asttokens&isExactly=true

#### 返回-2

```json
{
    "content": [
        {
            "id": "38ce5b54-474e-4976-a931-e15c9f8196b2",
            "name": "asttokens",
            "version": "2.0.5",
            "licenseConcluded": "NOASSERTION",
            "copyright": "NONE",
            "supplier": null,
            "statistics": {
                "criticalVulCount": 0,
                "highVulCount": 1,
                "mediumVulCount": 2,
                "lowVulCount": 0,
                "noneVulCount": 0,
                "unknownVulCount": 1
            }
        }
    ],
    "last": true,
    "totalElements": 1,
    "totalPages": 1,
    "size": 5,
    "number": 0,
    "first": true,
    "numberOfElements": 1,
    "empty": false
}
```

#### 请求-3

POST /sbom-api/querySbomPackages?productName=mindsporeTest&vulSeverity=HIGH

#### 返回-3

```json
{
  "content": [
    {
      "id": "68960bae-22c6-4ab0-ae0e-3df51a26a3c9",
      "name": "protobuf",
      "version": "4.21.5",
      "licenseConcluded": "NOASSERTION",
      "copyright": "NONE",
      "supplier": null,
      "statistics": {
        "criticalVulCount": 0,
        "highVulCount": 1,
        "mediumVulCount": 0,
        "lowVulCount": 0,
        "noneVulCount": 0,
        "unknownVulCount": 0
      }
    }
  ],
  "last": true,
  "totalPages": 1,
  "totalElements": 1,
  "size": 15,
  "number": 0,
  "first": true,
  "numberOfElements": 1,
  "empty": false
}
```

#### 请求-4

POST /sbom-api/querySbomPackages?productName=mindsporeTest&noLicense=true

#### 返回-4

```json
{
  "content": [
    {
      "id": "291d4673-b6ac-4cba-967f-e9ce994384ba",
      "name": "c-ares",
      "version": "1.15.0",
      "licenseConcluded": "NOASSERTION",
      "copyright": "NONE",
      "supplier": null,
      "statistics": {
        "criticalVulCount": 0,
        "highVulCount": 0,
        "mediumVulCount": 0,
        "lowVulCount": 0,
        "noneVulCount": 0,
        "unknownVulCount": 0
      }
    },
    {
      "id": "8b3cb8f5-7488-4608-ac5d-8760ee44214a",
      "name": "glog",
      "version": "0.4.0",
      "licenseConcluded": "NOASSERTION",
      "copyright": "NONE",
      "supplier": null,
      "statistics": {
        "criticalVulCount": 0,
        "highVulCount": 0,
        "mediumVulCount": 0,
        "lowVulCount": 0,
        "noneVulCount": 0,
        "unknownVulCount": 0
      }
    }
  ],
  "last": true,
  "totalPages": 1,
  "totalElements": 2,
  "size": 15,
  "number": 0,
  "first": true,
  "numberOfElements": 2,
  "empty": false
}
```

#### 请求-5

POST /sbom-api/querySbomPackages?productName=mindsporeTest&multiLicense=true

#### 返回-5

```json
{
  "content": [
    {
      "id": "ab335d86-8d74-49e5-93fe-960578687128",
      "name": "packaging",
      "version": "21.0",
      "licenseConcluded": "NOASSERTION",
      "copyright": "NONE",
      "supplier": null,
      "statistics": {
        "criticalVulCount": 0,
        "highVulCount": 0,
        "mediumVulCount": 0,
        "lowVulCount": 0,
        "noneVulCount": 0,
        "unknownVulCount": 0
      }
    }
  ],
  "last": true,
  "totalPages": 1,
  "totalElements": 1,
  "size": 15,
  "number": 0,
  "first": true,
  "numberOfElements": 1,
  "empty": false
}
```

#### 请求-6

POST /sbom-api/querySbomPackages?productName=mindsporeTest&isLegalLicense=true

#### 返回-6

```json
{
  "content": [
    {
      "id": "1c7b9852-7702-422d-9199-91412c3bf5b1",
      "name": "abseil-cpp",
      "version": "20210324.2",
      "licenseConcluded": "Apache-2.0",
      "copyright": "NONE",
      "supplier": null,
      "statistics": {
        "criticalVulCount": 0,
        "highVulCount": 0,
        "mediumVulCount": 0,
        "lowVulCount": 0,
        "noneVulCount": 0,
        "unknownVulCount": 0
      }
    },
    {
      "id": "51c627e3-dd55-44be-ac34-b40309abc0d1",
      "name": "akg",
      "version": "1.8.0",
      "licenseConcluded": "Apache-2.0",
      "copyright": "Copyright 2019-2020 Huawei Technologies Co., Ltd",
      "supplier": null,
      "statistics": {
        "criticalVulCount": 0,
        "highVulCount": 0,
        "mediumVulCount": 0,
        "lowVulCount": 0,
        "noneVulCount": 0,
        "unknownVulCount": 0
      }
    }
  ],
  "last": true,
  "totalPages": 1,
  "totalElements": 2,
  "size": 15,
  "number": 0,
  "first": true,
  "numberOfElements": 2,
  "empty": false
}
```

#### 请求-7

POST /sbom-api/querySbomPackages?productName=mindsporeTest&licenseId=Zlib

#### 返回-7

```json
{
  "content": [
    {
      "id": "8e32dde1-af57-4ef7-9576-28c4c57c6736",
      "name": "tinyxml2",
      "version": "8.0.0",
      "licenseConcluded": "Zlib",
      "copyright": "NONE",
      "supplier": null,
      "statistics": {
        "criticalVulCount": 0,
        "highVulCount": 0,
        "mediumVulCount": 0,
        "lowVulCount": 0,
        "noneVulCount": 0,
        "unknownVulCount": 0
      }
    }
  ],
  "last": true,
  "totalPages": 1,
  "totalElements": 1,
  "size": 15,
  "number": 0,
  "first": true,
  "numberOfElements": 1,
  "empty": false
}
```
