<!--
project: "SBOM Service"
title: 查询软件包正向依赖项
date: 2022-10-21
maintainer: zejunw
comment: ""
-->

# 查询软件包正向依赖项

## API接口

GET /queryPackageBinaryManagement/{packageId}/{binaryType}

### 路径参数


| 参数Key    | 参数名     | 参数类型 | 是否必填 | 备注                                                                                                                                                                                     |
| ------------ | ------------ | :--------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| packageId  | 查询的包ID | string   | 必填     |                                                                                                                                                                                          |
| binaryType | 依赖类型   | string   | 必填     | 内容为枚举值，可选值包括：1.ALL（全部）;2.PACKAGE_MANAGER（Package Info）;3.PROVIDE_MANAGER（Module Info）;4.EXTERNAL_MANAGER（Dependency）;5.RELATIONSHIP_MANAGER（Runtime Dependency） |

### HTTP状态码

```text
200: OK
500: Internal Server Error
```

### 返回字段说明

```yaml
packageList: 包信息列表（Package Info）				list
	依赖项信息	Object
provideList: 模块信息列表（Module Info）				list
	依赖项信息	Object
externalList: 依赖信息列表（Dependency）				list
	依赖项信息	Object
relationshipList: 运行时依赖信息列表（Runtime Dependency）	list
	依赖项信息	Object

依赖项项息	                                                Object
	id: 依赖项ID						string
	category: 依赖项分类					string(PACKAGE_MANAGER,PROVIDE_MANAGER,EXTERNAL_MANAGER,RELATIONSHIP_MANAGER)
	type: 依赖项描述符类型					string(默认为purl)
	comment: 依赖项评论					string
	purl: 包唯一性描述符（Package URL）			Object
		schema: 软件包Schema				string(默认为pkg)
		type: 软件包类型					string(例如：rpm、maven、pipy)
		namespace: 软件包命名空间			string(type为maven等时使用)
		name: 软件包名称					string
		version: 软件包版本号				string
		subpath: 软件包文件引用路径			string
		qualifiers: 软件包扩展信息		        Object
			arch: CPU架构平台			string
			epoch: 发布版本号			string
			upstream: 上游信息			string
```

### 样例

#### 请求-1

GET /sbom-api/queryPackageBinaryManagement/052bd698-4471-49af-84b1-3009d30a08fb/all

#### 返回-1

```json
{
    "packageList": [
        {
            "id": "6b1ba4dd-8157-4990-bd59-c899218f2ee5",
            "category": "PACKAGE_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "rpm",
                "namespace": null,
                "name": "hive",
                "version": "3.1.2-3.oe2203",
                "qualifiers": {
                    "arch": "noarch",
                    "epoch": "0",
                    "upstream": "hive-3.1.2-3.oe2203.src.rpm"
                },
                "subpath": null
            }
        }
    ],
    "provideList": [
        {
            "id": "75a7417b-b422-4a60-8d7d-4f6a01386754",
            "category": "PROVIDE_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "maven",
                "namespace": "org.apache.hive.hcatalog",
                "name": "hive-webhcat",
                "version": "3.1.2",
                "qualifiers": null,
                "subpath": null
            }
        },
        {
            "id": "0434cb11-456d-4ea0-97cd-6728f0554d07",
            "category": "PROVIDE_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "maven",
                "namespace": "org.apache.hive",
                "name": "hive-streaming",
                "version": "3.1.2",
                "qualifiers": null,
                "subpath": null
            }
        }
    ],
    "externalList": [
        {
            "id": "f0e290c1-1a2f-4748-aa4b-74d38bb2a81a",
            "category": "EXTERNAL_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "maven",
                "namespace": "org.apache.htrace",
                "name": "htrace-core",
                "version": "3.2.0-incubating",
                "qualifiers": null,
                "subpath": null
            }
        },
        {
            "id": "05bed126-0a5d-420a-8f79-b05ff8a0ca93",
            "category": "EXTERNAL_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "maven",
                "namespace": "org.scala-lang",
                "name": "scala-library",
                "version": "2.11.8",
                "qualifiers": null,
                "subpath": null
            }
        },
        {
            "id": "124d81d1-f00f-4634-8b20-a2785a80c4ef",
            "category": "EXTERNAL_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "maven",
                "namespace": "com.github.joshelser",
                "name": "dropwizard-metrics-hadoop-metrics2-reporter",
                "version": "0.1.2",
                "qualifiers": null,
                "subpath": null
            }
        },
        {
            "id": "77f451f5-a6b6-4fb4-882f-0b48a74a18b1",
            "category": "EXTERNAL_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "maven",
                "namespace": "com.google.protobuf",
                "name": "protobuf-java",
                "version": "2.5.0",
                "qualifiers": null,
                "subpath": null
            }
        },
        {
            "id": "6c38dfe6-6315-4185-853f-3c290a3e28db",
            "category": "EXTERNAL_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "maven",
                "namespace": "org.apache.hbase",
                "name": "hbase-http",
                "version": "2.0.0-alpha4",
                "qualifiers": null,
                "subpath": null
            }
        }
    ],
    "relationshipList": [
        {
            "id": "c0912b2a-44d7-4f2c-ba04-25c11c1bde6a",
            "category": "PACKAGE_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "rpm",
                "namespace": null,
                "name": "zookeeper",
                "version": "3.6.2-2.4.oe2203",
                "qualifiers": {
                    "arch": "noarch",
                    "epoch": "0",
                    "upstream": "zookeeper-3.6.2-2.4.oe2203.src.rpm"
                },
                "subpath": null
            }
        },
        {
            "id": "419357ed-759b-4833-b357-5f948b0d9092",
            "category": "PACKAGE_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "rpm",
                "namespace": null,
                "name": "kafka",
                "version": "2.6.0-2.oe2203",
                "qualifiers": {
                    "arch": "x86_64",
                    "epoch": "0",
                    "upstream": "kafka-2.6.0-2.oe2203.src.rpm"
                },
                "subpath": null
            }
        },
        {
            "id": "0093dcb3-998e-4db1-a108-d0b0351ad3aa",
            "category": "PACKAGE_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "rpm",
                "namespace": null,
                "name": "flink",
                "version": "1.12.7-2.oe2203",
                "qualifiers": {
                    "arch": "x86_64",
                    "epoch": "0",
                    "upstream": "flink-1.12.7-2.oe2203.src.rpm"
                },
                "subpath": null
            }
        },
        {
            "id": "746bf92b-91b6-4823-9a53-42719b0ab046",
            "category": "PACKAGE_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "rpm",
                "namespace": null,
                "name": "cassandra-java-driver",
                "version": "3.4.0-2.oe2203",
                "qualifiers": {
                    "arch": "noarch",
                    "epoch": "0",
                    "upstream": "cassandra-java-driver-3.4.0-2.oe2203.src.rpm"
                },
                "subpath": null
            }
        }
    ]
}
```

#### 请求-2

GET /sbom-api/queryPackageBinaryManagement/052bd698-4471-49af-84b1-3009d30a08fb/PACKAGE_MANAGER

#### 返回-2

```json
{
    "packageList": [
        {
            "id": "6b1ba4dd-8157-4990-bd59-c899218f2ee5",
            "category": "PACKAGE_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "rpm",
                "namespace": null,
                "name": "hive",
                "version": "3.1.2-3.oe2203",
                "qualifiers": {
                    "arch": "noarch",
                    "epoch": "0",
                    "upstream": "hive-3.1.2-3.oe2203.src.rpm"
                },
                "subpath": null
            }
        }
    ],
    "provideList": [],
    "externalList": [],
    "relationshipList": []
}
```

#### 请求-3

GET /sbom-api/queryPackageBinaryManagement/052bd698-4471-49af-84b1-3009d30a08fb/RELATIONSHIP_MANAGER

#### 返回-3

```json
{
    "packageList": [],
    "provideList": [],
    "externalList": [],
    "relationshipList": [
      {
            "id": "c0912b2a-44d7-4f2c-ba04-25c11c1bde6a",
            "category": "PACKAGE_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "rpm",
                "namespace": null,
                "name": "zookeeper",
                "version": "3.6.2-2.4.oe2203",
                "qualifiers": {
                    "arch": "noarch",
                    "epoch": "0",
                    "upstream": "zookeeper-3.6.2-2.4.oe2203.src.rpm"
                },
                "subpath": null
            }
        },
        {
            "id": "419357ed-759b-4833-b357-5f948b0d9092",
            "category": "PACKAGE_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "rpm",
                "namespace": null,
                "name": "kafka",
                "version": "2.6.0-2.oe2203",
                "qualifiers": {
                    "arch": "x86_64",
                    "epoch": "0",
                    "upstream": "kafka-2.6.0-2.oe2203.src.rpm"
                },
                "subpath": null
            }
        },
        {
            "id": "0093dcb3-998e-4db1-a108-d0b0351ad3aa",
            "category": "PACKAGE_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "rpm",
                "namespace": null,
                "name": "flink",
                "version": "1.12.7-2.oe2203",
                "qualifiers": {
                    "arch": "x86_64",
                    "epoch": "0",
                    "upstream": "flink-1.12.7-2.oe2203.src.rpm"
                },
                "subpath": null
            }
        },
        {
            "id": "746bf92b-91b6-4823-9a53-42719b0ab046",
            "category": "PACKAGE_MANAGER",
            "type": "purl",
            "comment": null,
            "purl": {
                "schema": "pkg",
                "type": "rpm",
                "namespace": null,
                "name": "cassandra-java-driver",
                "version": "3.4.0-2.oe2203",
                "qualifiers": {
                    "arch": "noarch",
                    "epoch": "0",
                    "upstream": "cassandra-java-driver-3.4.0-2.oe2203.src.rpm"
                },
                "subpath": null
            }
        }
    ]
}
```
